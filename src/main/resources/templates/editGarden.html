<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">
<head>
  <meta http-equiv="Content-Type" context="text/html; charset=UTF-8">
  <title>Edit Garden Form</title>
  <link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">
</head>
<body>
<div th:insert="~{fragments/fragments :: title}">Header</div>
<nav th:insert="~{fragments/fragments :: gardens}">Gardens</nav>
<div class="content">
  <div>
    <div class="forumContentsDiv">
      <form th:action="@{edit-garden(gardenId=${gardenId})}" method="post">
        <div class="form-field">
          <label class="form-input" for="gardenName"> Garden Name: </label>
          <input type="text" class="form-control" id="gardenName" th:name="gardenName"
                 th:value="*{gardenName}" data-cy="gardenName" autofocus>
          <p class="errorMessage" th:text=${gardenNameError}></p>
        </div>
        <br/>
        <div class="form-field">
          <label class="form-input" for="gardenSize"> Size of your garden in square metres: </label>
          <input type="number" step="0.01" class="form-control" id="gardenSize" th:name="gardenSize"
                 th:value="*{gardenSize}" data-cy="gardenSize" autofocus>
          <p class="errorMessage" th:text=${gardenSizeError}></p>
        </div>
        <br/>
        <h2>Location</h2>
        <div class="form-field">
          <label class="inputStyle" for="streetAddress"> Street Address: </label>
          <p class="info-message">Start typing location to see suggestions.</p>
          <input type="text" class="form-control" id="streetAddress" th:name="streetAddress"
                 th:value="*{streetAddress}" data-cy="streetAddress" autofocus>
          <p class="errorMessage" th:text=${streetAddressError}></p>
          <div id="autocomplete-list" class="inputStyle"></div>
        </div>
        <br/>
        <div class="form-field">
          <label class="inputStyle" for="country"> Country: </label>
          <input type="text" class="form-control" id="country" th:name="country"
                 th:value="*{country}" data-cy="country" autofocus>
          <p class="errorMessage" th:text=${countryError}></p>
        </div>
        <br/>
        <div class="form-field">
          <label class="inputStyle" for="city"> City: </label>
          <input type="text" class="form-control" id="city" th:name="city"
                 th:value="*{city}" data-cy="city" autofocus>
          <p class="errorMessage" th:text=${cityError}></p>
        </div>
        <br/>
        <div class="form-field">
          <label class="inputStyle" for="suburb"> Suburb: </label>
          <input type="text" class="form-control" id="suburb" th:name="suburb"
                 th:value="*{suburb}" data-cy="suburb" autofocus>
          <p class="errorMessage" th:text=${suburbError}></p>
        </div>
        <br/>
        <div class="form-field">
          <label class="inputStyle" for="postcode"> Postcode: </label>
          <input type="text" class="form-control" id="postcode" th:name="postcode"
                 th:value="*{postcode}" data-cy="postcode" autofocus>
          <p class="errorMessage" th:text=${postcodeError}></p>
        </div>
        <br/>

        <button class="form-button" type="submit">Submit!</button>
        <a th:href="@{/view-garden(gardenId=${gardenId})}"><button class="form-button" type="button">Cancel</button></a>
      </form>
    </div>
  </div>
</div>
<!-- No location message modal -->
<div th:if="${noLocationFound}">
  <div id="noLocationFoundModal" class="modal">
    <div class="modal-content">
      <p>No matching location found, location-based services may not work.</p>
      <div class="modal-buttons">
        <form th:action="@{back-to-form(gardenId=${gardenId})}" method="post">
          <button id="backToFormBtn" onclick="backToForm()">Edit garden</button>
          <button type="submit" id="backToForm" style="display: none;"></button>
        </form>
        <form th:action="@{view-garden-from-edit(gardenId=${gardenId})}" method="post">
          <button id="useLocationBtn" onclick="submitViewGardenRedirectForm()">Continue</button>
          <button type="submit" id="viewGardenRedirect" style="display: none;"></button>
        </form>
      </div>
    </div>
  </div>
</div>
<script th:src="@{/javascript/locationAutocomplete.js}"></script>
<script>
  function backToForm() {
    document.getElementById("backToForm").click();
  }
  function submitViewGardenRedirectForm() {
    document.getElementById("viewGardenRedirect").click();
  }
</script>
</body>
</html>